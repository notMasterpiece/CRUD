(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(t,e,n){t.exports=n(55)},29:function(t,e,n){},31:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),c=n(21),i=n.n(c),r=(n(29),n(7)),s=n(8),l=n(10),m=n(9),u=n(11),p=(n(31),n(57)),h=n(59),d=n(58),f=n(6),v=n.n(f),b=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(m.a)(e).call(this,t))).onChange=function(t){n.setState({value:t.target.value})},n.onCreate=function(t){var e=n.props.match.params.id;t.preventDefault();var a={title:n.state.value};v.a.post("/api/post/".concat(e),a).then(function(){n.props.history.push("/")}).catch(function(t){console.log(t)})},n.state={value:""},n}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.id;v.a.get("/api/post/".concat(e)).then(function(e){t.setState({value:e.data.title})})}},{key:"render",value:function(){var t=this.state.value;return o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("div",{className:"container"},o.a.createElement("form",{className:"top-form",onSubmit:this.onCreate},o.a.createElement("input",{className:"form-input",type:"text",value:t,onChange:this.onChange}),o.a.createElement("button",{type:"submit",disabled:t.trim().length<=0},"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"))))}}]),e}(a.Component),E=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.comment.title;this.setState({commentValue:t})}},{key:"render",value:function(){var t=this.props.deleteComment,e=this.props.comment,n=e._id,a=e.title;return o.a.createElement("li",{className:"comment"},o.a.createElement("span",null,a),o.a.createElement("button",{onClick:function(){return t(n)}},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))}}]),e}(a.Component),g=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(m.a)(e).call(this,t))).getPosts=function(){var t=n.props.match.params.id;v.a.get("/api/post/".concat(t)).then(function(t){n.setState({post:t.data})})},n.onChange=function(t){n.setState({comment:t.target.value})},n.addComment=function(t){t.preventDefault();var e=n.props.match.params.id,a={title:n.state.comment};v.a.post("/api/post/comment/".concat(e),a).then(function(t){n.setState({comments:t.data.comments,comment:""}),n.getPosts()}).catch(function(t){console.log(t)})},n.deleteComment=function(t){var e=n.props.match.params.id;v.a.delete("/api/post/uncomment/".concat(e,"/").concat(t)).then(function(){n.getPosts()}).catch(function(t){console.log(t)})},n.editComment=function(t){},n.state={post:"",comment:"",comments:[]},n}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var t=this,e=this.state,n=e.post,a=e.comment;return o.a.createElement("div",null,o.a.createElement("br",null),o.a.createElement("div",{className:"list-item"},n.title),o.a.createElement("div",{className:"comments-block"},o.a.createElement("form",{className:"comments-form",onSubmit:this.addComment},o.a.createElement("input",{type:"text",onChange:this.onChange,value:a}),o.a.createElement("button",{type:"submit"},"\u0414\u043e\u0434\u0430\u0442\u0438 \u043a\u043e\u043c\u043c\u0435\u043d\u0442")),o.a.createElement("ol",null,n.comments&&n.comments.map(function(e){return o.a.createElement(E,{key:e._id,comment:e,editComment:t.editComment,deleteComment:t.deleteComment})}))))}}]),e}(a.Component),C=function(t){var e=t.value,n=t.onChange,a=t.onCreate;return o.a.createElement("form",{className:"top-form",onSubmit:a},o.a.createElement("input",{className:"form-input",type:"text",value:e,onChange:n,placeholder:"..."}),o.a.createElement("button",{type:"submit",disabled:e.trim().length<=0},"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438 \u043d\u043e\u0432\u0438\u0439"))},j=n(56),O=function(t){var e=t.list,n=t.onDelete,a=t.onEdit;return e&&e.length<=0?o.a.createElement("p",null," \u043f\u043e\u0441\u0442\u0456\u0432 \u043d\u0435\u043c\u0430\u0454"):o.a.createElement("ul",null,e&&e.map(function(t){return o.a.createElement("li",{key:t._id,className:"list-item"},o.a.createElement(j.a,{to:"post/show/".concat(t._id)},t.title),o.a.createElement(j.a,{to:"/post/edit/".concat(t._id),className:"btn-edit",type:"button",onClick:a},"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"),o.a.createElement("button",{className:"btn-delete",type:"button",onClick:function(){return n(t._id)}},"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"))}))},y=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(m.a)(e).call(this,t))).onDelete=function(t){var e=n.state.list;v.a.delete("/api/post/".concat(t)).then(function(){var a=e.filter(function(e){return e._id!==t});n.setState({list:a})})},n.onEdit=function(){n.setState({showEdit:!n.state.showEdit})},n.onChange=function(t){n.setState({value:t.target.value})},n.onCreate=function(t){if(t.preventDefault(),!n.state.value.trim().length)return!1;var e={title:n.state.value};v.a.post("/api/post",e).then(function(){n.getPosts(),n.resetState()})},n.getPosts=function(){v.a.get("/api/post").then(function(t){n.setState({list:t.data})})},n.resetState=function(){n.setState({value:""})},n.state={value:""},n}return Object(u.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){this.getPosts()}},{key:"render",value:function(){var t=this.state,e=t.value,n=t.list;return o.a.createElement("div",null,o.a.createElement(C,{value:e,onChange:this.onChange,onCreate:this.onCreate}),o.a.createElement(O,{list:n,onDelete:this.onDelete,onEdit:this.onEdit}))}}]),e}(o.a.Component),k=function(t){function e(){return Object(r.a)(this,e),Object(l.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(u.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement(p.a,null,o.a.createElement(h.a,null,o.a.createElement(d.a,{exact:!0,path:"/",component:y}),o.a.createElement(d.a,{exact:!0,path:"/post/edit/:id",component:b}),o.a.createElement(d.a,{exact:!0,path:"/post/show/:id",component:g}))))}}]),e}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[24,2,1]]]);
//# sourceMappingURL=main.02243bc1.chunk.js.map